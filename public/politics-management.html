<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sim of World - Parti Yönetimi</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg-dark: #0a0a0a; 
            --bg-card: #141414; 
            --bg-input: #1a1a1a;
            --accent: #9b59b6; /* Parti Teması: Mor */
            --accent-gold: #ffd700;
            --accent-red: #e74c3c;
            --accent-green: #2ecc71;
            --text-white: #ffffff; 
            --text-muted: #888; 
            --border-color: #222;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: #000;
            font-family: 'Rajdhani', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--text-white);
        }

        .game-container {
            width: 100%; max-width: 450px; background-color: var(--bg-dark);
            height: 100vh; display: flex; flex-direction: column; position: relative;
            box-shadow: 0 0 40px rgba(0,0,0,0.5); border-left: 1px solid #111; border-right: 1px solid #111;
        }

        /* HEADER */
        header { background-color: rgba(10,10,10,0.9); backdrop-filter: blur(10px); padding: 10px; border-bottom: 1px solid var(--border-color); }
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .logo { font-size: 1.2rem; font-weight: 700; }
        .stat-box { background: var(--bg-input); padding: 5px 10px; border-radius: 4px; font-size: 0.9rem; color: var(--accent); display: flex; align-items: center; gap: 5px; }
        .status-bars { display: flex; gap: 5px; }
        .bar-item { background: var(--bg-input); padding: 4px; border-radius: 15px; font-size: 0.75rem; flex: 1; text-align: center; font-weight: bold; }

        /* MAIN */
        main { flex: 1; padding: 20px; overflow-y: auto; padding-bottom: 80px; }

        .page-header { text-align: center; margin-bottom: 20px; animation: fadeInDown 0.5s; }
        .page-title { font-size: 1.4rem; letter-spacing: 1px; color: #fff; text-transform: uppercase; font-weight: 800; }

        .header-badge {
            display: none;
        }
        .header-badge::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: radial-gradient(circle, var(--accent) 0%, transparent 100%);
            opacity: 0.7;
        }
        .header-badge h1 {
            font-size: 1.8rem;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .header-badge h1 i { color: var(--accent); }
        .header-badge p {
            font-size: 0.9rem;
            color: #aaa;
            font-weight: 500;
        }
        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #fff;
            font-size: 1.2rem;
            cursor: pointer;
            text-decoration: none;
            z-index: 10;
        }

        /* KASA KARTI */
        .vault-card {
            background: linear-gradient(135deg, rgba(155, 89, 182, 0.1), var(--bg-card));
            border: 1px solid var(--accent); border-radius: 12px; padding: 20px;
            margin-bottom: 20px; position: relative; text-align: center;
            box-shadow: 0 0 15px rgba(155, 89, 182, 0.1);
        }
        .vc-icon { font-size: 3rem; color: var(--accent); margin-bottom: 10px; }
        .vc-title { font-size: 0.9rem; color: #aaa; text-transform: uppercase; letter-spacing: 1px; }
        .vc-amount { font-size: 1.8rem; font-weight: bold; color: #fff; margin: 5px 0 15px 0; text-shadow: 0 0 10px rgba(155, 89, 182, 0.3); }
        
        .vc-actions { display: flex; gap: 10px; }
        .vc-input { 
            flex: 1; background: #000; border: 1px solid #444; color: #fff; 
            padding: 10px; border-radius: 5px; font-family: 'Rajdhani'; font-weight: bold; text-align: center; outline: none;
        }
        .vc-input:focus { border-color: var(--accent); }
        .btn-withdraw {
            background: var(--accent); color: #fff; border: none; padding: 0 20px;
            border-radius: 5px; font-weight: bold; font-family: 'Rajdhani'; cursor: pointer;
        }

        /* AYARLAR KARTI */
        .settings-card {
            background: var(--bg-card); border: 1px solid var(--border-color);
            border-radius: 10px; padding: 15px; margin-bottom: 20px;
        }
        .card-header { font-size: 1rem; color: var(--accent-gold); font-weight: 700; border-bottom: 1px solid #333; padding-bottom: 5px; margin-bottom: 15px; display: flex; align-items: center; gap: 8px; }
        
        .form-group { margin-bottom: 15px; }
        .form-label { display: block; font-size: 0.8rem; color: #aaa; margin-bottom: 5px; }
        .form-input, .form-select { 
            width: 100%; background: #000; border: 1px solid #444; color: #fff; 
            padding: 10px; border-radius: 5px; font-family: 'Rajdhani'; font-size: 1rem; outline: none;
        }
        .form-input:focus { border-color: var(--accent); }

        .btn-save {
            width: 100%; background: #333; color: #fff; border: 1px solid #555;
            padding: 10px; border-radius: 5px; font-weight: bold; cursor: pointer; transition: 0.2s;
        }
        .btn-save:hover { background: var(--accent); color: #fff; border-color: var(--accent); }

        /* ÜYE YÖNETİMİ */
        .member-list { display: flex; flex-direction: column; gap: 10px; max-height: 200px; overflow-y: auto; }
        .member-item {
            display: flex; justify-content: space-between; align-items: center;
            background: var(--bg-input); padding: 10px; border-radius: 6px; border: 1px solid #333;
        }
        .mi-info { display: flex; align-items: center; gap: 10px; }
        .mi-avatar { width: 30px; height: 30px; border-radius: 50%; border: 1px solid #555; }
        .mi-name { font-size: 0.9rem; font-weight: bold; }
        .mi-role { font-size: 0.7rem; color: #888; }
        
        .mi-actions { display: flex; gap: 5px; }
        .btn-icon { width: 25px; height: 25px; border-radius: 4px; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .btn-promote { background: rgba(46, 204, 113, 0.2); color: var(--accent-green); border: 1px solid var(--accent-green); }
        .btn-kick { background: rgba(231, 76, 60, 0.2); color: var(--accent-red); border: 1px solid var(--accent-red); }

        /* PROPAGANDA (GELİŞTİRME) */
        .propaganda-card {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), var(--bg-card));
            border: 1px solid var(--accent-gold); border-radius: 10px; padding: 15px;
            margin-bottom: 20px; text-align: center;
        }
        .pc-info { display: flex; justify-content: space-between; margin-bottom: 15px; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 5px; }
        .pc-col h4 { font-size: 0.8rem; color: var(--accent-gold); margin-bottom: 5px; }
        .pc-col p { font-size: 1rem; font-weight: bold; }
        
        .btn-rally {
            width: 100%; background: var(--accent-gold); color: #000; border: none;
            padding: 12px; border-radius: 5px; font-weight: bold; cursor: pointer;
            font-family: 'Rajdhani'; font-size: 1rem; display: flex; align-items: center; justify-content: center; gap: 8px;
        }

        /* SAYAÇ */
        .rally-progress { display: none; margin-top: 10px; }
        .rp-bg { width: 100%; height: 8px; background: #333; border-radius: 4px; overflow: hidden; }
        .rp-fill { width: 0%; height: 100%; background: var(--accent-gold); transition: width 1s linear; }
        .rp-text { font-size: 0.8rem; color: var(--accent-gold); margin-top: 5px; font-weight: bold; }

        /* BOTTOM NAV */
        .bottom-nav { position: absolute; bottom: 0; width: 100%; background: #0a0a0a; border-top: 1px solid #333; display: flex; justify-content: space-around; padding: 10px 0; z-index: 10; }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: var(--text-muted); font-size: 0.75rem; cursor: pointer; }
        .nav-item i { font-size: 1.4rem; margin-bottom: 3px; }
        .nav-item.active { color: var(--accent); }

        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <div class="game-container">
        <!-- HEADER -->
        <header>
            <div class="top-bar">
                <div class="logo">SIM <span>OF WORLD</span></div>
                <div class="stat-box"><i class="fas fa-wallet"></i> <span id="userMoney">0</span></div>
            </div>
            <div class="status-bars">
                <div class="bar-item" style="color:var(--accent-red);"><i class="fas fa-heart"></i> %100</div>
                <div class="bar-item" style="color:var(--accent-gold);"><i class="fas fa-bolt"></i> %100</div>
                <div class="bar-item" style="color:var(--accent);"><i class="fas fa-star"></i> Lv.5</div>
            </div>
        </header>

        <main>
        <div class="page-header">
            <h1 class="page-title">PARTİ YÖNETİMİ</h1>
        </div>

            <!-- KASA -->
            <div class="vault-card">
                <i class="fas fa-landmark vc-icon"></i>
                <div class="vc-title">PARTİ KASASI</div>
                <div class="vc-amount" id="partyVault">25.000.000 ₺</div>
                
                <div class="vc-actions">
                    <input type="number" id="withdrawAmount" class="vc-input" placeholder="Miktar Gir">
                    <button class="btn-withdraw" onclick="withdrawMoney()">ÇEK</button>
                </div>
            </div>

            <!-- GENEL AYARLAR -->
            <div class="settings-card">
                <div class="card-header"><i class="fas fa-sliders-h"></i> GENEL AYARLAR</div>
                <div class="form-group">
                    <label class="form-label">Parti Adı</label>
                    <input type="text" id="pNameInput" class="form-input" value="Milli Birlik Partisi">
                </div>
                <div class="form-group">
                    <label class="form-label">Kısaltma</label>
                    <input type="text" id="pAbbrInput" class="form-input" value="MBP" maxlength="4">
                </div>
                <div class="form-group">
                    <label class="form-label">İdeoloji</label>
                    <select id="pIdeology" class="form-select">
                        <option value="Teknokrat" selected>Teknokrat</option>
                        <option value="Demokrat">Demokrat</option>
                        <option value="Liberal">Liberal</option>
                    </select>
                </div>
                <button class="btn-save" onclick="saveSettings()">GÜNCELLE</button>
            </div>

            <!-- PROPAGANDA -->
            <div class="propaganda-card">
                <div class="card-header" style="color:var(--accent-gold); border:none; margin-bottom:5px; padding:0;">
                    <i class="fas fa-bullhorn"></i> SEÇİM KAMPANYASI
                </div>
                
                <div class="pc-info">
                    <div class="pc-col">
                        <h4>MEVCUT OY</h4>
                        <p id="currentVotes">%35</p>
                    </div>
                    <div style="display:flex; align-items:center; color:#555;"><i class="fas fa-chevron-right"></i></div>
                    <div class="pc-col">
                        <h4>HEDEF</h4>
                        <p style="color:var(--accent-gold)">%38</p>
                    </div>
                </div>

                <button id="rallyBtn" class="btn-rally" onclick="startRally()">
                    <i class="fas fa-flag"></i> MİTİNG DÜZENLE (1M ₺)
                </button>

                <!-- Sayaç -->
                <div id="rallyProgress" class="rally-progress">
                    <div class="rp-bg"><div id="rpBar" class="rp-fill"></div></div>
                    <div id="rpTimer" class="rp-text">Miting Yapılıyor... 10s</div>
                </div>
            </div>

            <!-- ÜYE YÖNETİMİ -->
            <div class="settings-card">
                <div class="card-header"><i class="fas fa-users-cog"></i> ÜYE YÖNETİMİ</div>
                <div class="member-list" id="memberList">
                    <!-- JS Dolduracak -->
                </div>
            </div>

        </main>

        <nav class="bottom-nav">
            <div class="nav-item">
                <i class="fas fa-arrow-left"></i>
                <span onclick="window.location.href='party-dashboard.html'">Geri</span>
            </div>
            <div class="nav-item active">
                <i class="fas fa-cogs"></i>
                <span>Yönetim</span>
            </div>
            <div class="nav-item">
                <i class="fas fa-briefcase"></i>
                <span>Çanta</span>
            </div>
            <div class="nav-item">
                <i class="fas fa-user"></i>
                <span>Profil</span>
            </div>
        </nav>

    </div>

    <script>
        // --- VERİLER ---
        let userMoney = 6979173;
        let party = {
            name: "Milli Birlik Partisi",
            abbr: "MBP",
            vault: 25000000,
            votes: 35,
            members: [
                { id: 1, name: "Tamer", role: "Bakan", avatar: "https://i.pravatar.cc/150?img=3" },
                { id: 2, name: "Richie", role: "Üye", avatar: "https://i.pravatar.cc/150?img=8" },
                { id: 3, name: "Baran", role: "Üye", avatar: "https://i.pravatar.cc/150?img=59" }
            ]
        };

        const fmt = (n) => n.toLocaleString('tr-TR');

        window.onload = () => {
            updateUI();
            renderMembers();
        };

        function updateUI() {
            document.getElementById('userMoney').innerText = fmt(userMoney);
            document.getElementById('partyVault').innerText = fmt(party.vault) + " ₺";
            document.getElementById('pNameInput').value = party.name;
            document.getElementById('pAbbrInput').value = party.abbr;
            document.getElementById('currentVotes').innerText = "%" + party.votes;
        }

        // --- KASA ---
        function withdrawMoney() {
            const amount = parseInt(document.getElementById('withdrawAmount').value);
            if(!amount || amount <= 0) return alert("Miktar giriniz.");
            
            if(amount > party.vault) return alert("Kasada yeterli para yok!");
            
            party.vault -= amount;
            userMoney += amount;
            document.getElementById('withdrawAmount').value = "";
            updateUI();
            alert("Para kasadan çekildi.");
        }

        // --- AYARLAR ---
        function saveSettings() {
            const name = document.getElementById('pNameInput').value;
            const abbr = document.getElementById('pAbbrInput').value;
            
            if(name.length < 3) return alert("İsim çok kısa.");
            party.name = name;
            party.abbr = abbr;
            alert("Ayarlar kaydedildi.");
        }

        // --- KAMPANYA ---
        function startRally() {
            const cost = 1000000;
            if(party.vault >= cost) {
                party.vault -= cost;
                updateUI();
                
                const btn = document.getElementById('rallyBtn');
                const prog = document.getElementById('rallyProgress');
                const bar = document.getElementById('rpBar');
                const txt = document.getElementById('rpTimer');

                btn.style.display = 'none';
                prog.style.display = 'block';

                let timeLeft = 10;
                const int = setInterval(() => {
                    timeLeft--;
                    const percent = ((10 - timeLeft) / 10) * 100;
                    bar.style.width = percent + "%";
                    txt.innerText = `Miting Yapılıyor... ${timeLeft}s`;

                    if(timeLeft <= 0) {
                        clearInterval(int);
                        finishRally();
                    }
                }, 1000);

            } else {
                alert("Kasa bakiyesi yetersiz!");
            }
        }

        function finishRally() {
            party.votes += 3; // %3 artış
            updateUI();
            
            document.getElementById('rallyBtn').style.display = 'flex';
            document.getElementById('rallyProgress').style.display = 'none';
            document.getElementById('rpBar').style.width = "0%";
            
            alert("Miting Başarılı! Oy oranınız arttı.");
        }

        // --- ÜYE YÖNETİMİ ---
        function renderMembers() {
            const list = document.getElementById('memberList');
            list.innerHTML = '';
            
            party.members.forEach(m => {
                const div = document.createElement('div');
                div.className = 'member-item';
                div.innerHTML = `
                    <div class="mi-info">
                        <img src="${m.avatar}" class="mi-avatar">
                        <div>
                            <div class="mi-name">${m.name}</div>
                            <div class="mi-role">${m.role}</div>
                        </div>
                    </div>
                    <div class="mi-actions">
                        <button class="btn-icon btn-promote" onclick="promoteMember(${m.id})"><i class="fas fa-arrow-up"></i></button>
                        <button class="btn-icon btn-kick" onclick="kickMember(${m.id})"><i class="fas fa-times"></i></button>
                    </div>
                `;
                list.appendChild(div);
            });
        }

        function promoteMember(id) {
            const m = party.members.find(x => x.id === id);
            m.role = "Bakan";
            renderMembers();
            alert(`${m.name} terfi ettirildi.`);
        }

        function kickMember(id) {
            if(confirm("Üyeyi atmak istediğine emin misin?")) {
                party.members = party.members.filter(x => x.id !== id);
                renderMembers();
            }
        }

    </script>
</body>
</html>